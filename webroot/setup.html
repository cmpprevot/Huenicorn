<!DOCTYPE html>
<html>
  <head>
    <title>Huenicorn initial setup</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="logo.svg" sizes="any" type="image/svg+xml">
  </head>

  <body>
    <h1>Huenicorn initial setup</h1>

    <section id="setupSection">
      <div class="step">
        <h1>Welcome !</h1>
        <p>Huenicorn requires a quick initial setup to get started</p>
        <button onclick="setupUI.incStep()">Proceed</button>
        <button onclick="setupUI.abort()">Abort</button>
      </div>

      <div class="step">
        <h1>Identify Hue Bridge</h1>
        <p>
          Please enter the address of your Hue bridge<br/>
          (or try an automatic identification)
        </p>
        <p><input type="text" id="bridgeAddress"/></p>
        <p id="bridgeAddressErrorMessage" class="errorMessage"></p>
        <p><button onclick="setupUI.autodetectBridge()">Auto-detect</button></p>

        <div id="multipleBridgeSection" style="display: none">
          <p>You seem to have multiple bridges.<br/>Please select one below (or input it manually above):</p>
          
          <p><select id="bridgeCandidates"></select></p>
        </div>

        <button onclick="setupUI.validateAddress()">Validate</button>
        <button onclick="setupUI.abort()">Abort</button>
      </div>

      <div class="step">
        <h1>API key</h1>
        <p>
          Some credentials are required to manage the Hue bridge.
        </p>
        <p>
          If you already have these informations and can retrieve them, they can be provided in the fields below.
        </p>
        <p><label>Username:</label><input type="text" id="username"/></p>
        <p><label>Clientkey:</label><input type="text" id="clientkey"/></p>
        <p id="credentialsErrorMessage" class="errorMessage"></p>
        
        <p>
          <button onclick="setupUI.validateCredentials()" style="width: 200px">Validate</button>
          <button onclick="setupUI.incStep()" style="width: 200px">I don't have credentials yet</button>
        </p>
        <button onclick="setupUI.abort()">Abort</button>
      </div>

      <div class="step">
        <h1>Register a new user</h1>
        <p>
          In order to register a new user, you now need to press the central button on your Hue bridge.
        </p>
        <p>
          Once this is done, you have one minute to press the registration button below.
        </p>
        <p id="newUserErrorMessage" class="errorMessage"></p>
        <p>
          <button onclick="setupUI.registerNewUser()" style="width: 200px">Register new user</button>
        </p>
        <button onclick="setupUI.abort()">Abort</button>
      </div>

      <div id="finishSection" style="display: none;">
        <h1>
          Huenicorn is now ready !
        </h1>
        
        <p>Feel free to manually edit the config file located at<br/>
          <a id="configFilePath"></a>
        </p>
        <p>
          The Light Manager will be available at this current page address.<br/>
          You might want to bookmark it for further use.
        </p>
        
        <div id="refreshSection" style="display: none">
          <p>You can now refresh this page to access the Light Manager</p>
          <p><button onclick="window.location.reload()">Refresh</button></p>
        </div>
      </div>

      <div id="abortSection" style="display: none;">
        <h1>The setup was aborted</h1>
        <p>Hope to see you again soon !</p>
      </div>
    </section>

    <section id="versionSection"></section>

    <script src="Utils.js"></script>
    <script src="Version.js"></script>
    <script src="Rainbow.js"></script>
    <script src="mainSetup.js"></script>
  </body>
</html>
